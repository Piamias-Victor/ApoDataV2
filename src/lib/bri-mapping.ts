export interface PharmacyMapping {
    listing_name: string;
    cip: string;
    extractor_name: string;
    id_nat: string;
}

export const PHARMACY_CIP_MAPPING: PharmacyMapping[] = [
    { listing_name: "GIE PHARMACIE CAP 3000", cip: "2241522", extractor_name: "GIE GRANDE PHARMACIE CAP 3000", id_nat: "062044623" },
    { listing_name: "EASYPARAPHARMACIE", cip: "2001453", extractor_name: "EASYPARAPHARMACIE", id_nat: "" },
    { listing_name: "PHARMACIE GRAND LITTORAL", cip: "2074088", extractor_name: "PHARMACIE GRAND LITTORAL", id_nat: "132040429" },
    { listing_name: "SELARL PHARMACIE DES ARCEAUX", cip: "2018856", extractor_name: "SELARL PHARMACIE DES ARCEAUX", id_nat: "342027828" },
    { listing_name: "PHARMACIE BECKER MONTEUX", cip: "2267912", extractor_name: "PHARMACIE BECKER MONTEUX", id_nat: "842004863" },
    { listing_name: "PHARMACIE DU COURS MIRABEAU", cip: "2068755", extractor_name: "PHARMACIE DU COURS MIRABEAU", id_nat: "132040585" },
    { listing_name: "PHARMACIE VALENCE 2", cip: "2012629", extractor_name: "PHARMACIE VALENCE 2", id_nat: "262071004" },
    { listing_name: "PHARMACIE HOMME DE FER", cip: "2172852", extractor_name: "PHARMACIE DE L'HOMME DE FER", id_nat: "672030095" },
    { listing_name: "PHARMACIE DE LA CROISIÈRE", cip: "2174844", extractor_name: "PHARMACIE DE LA CROISIÈRE", id_nat: "682020763" },
    { listing_name: "PHARMACIE CENTRE COMMERCIAL LA TRINITÉ", cip: "2001842", extractor_name: "PHARMACIE CENTRE COMMERCIAL TRINITE", id_nat: "062027784" },
    { listing_name: "PHARMACIE BAB2", cip: "2168825", extractor_name: "PHARMACIE BAB2", id_nat: "642013593" },
    { listing_name: "PHARMACIE DE LA SORGUE", cip: "2266400", extractor_name: "PHARMACIE DE LA SORGUE", id_nat: "842005456" },
    { listing_name: "PHARMACIE BECKER CARPENTRAS", cip: "2213720", extractor_name: "PHARMACIE BECKER CARPENTRAS", id_nat: "842006751" },
    { listing_name: "PHARMACIE MARTINET", cip: "2069607", extractor_name: "PHARMACIE MARTINET", id_nat: "132086612" },
    { listing_name: "PHARMACIE DU PRINTEMPS", cip: "2264974", extractor_name: "PHARMACIE DU PRINTEMPS", id_nat: "672033586" },
    { listing_name: "GRANDE PHARMACIE DE LA PART DIEU", cip: "2285554", extractor_name: "GRANDE PHARMACIE DE LA PART DIEU", id_nat: "692039340" },
    { listing_name: "PHARMACIE DU PALAIS", cip: "2261659", extractor_name: "PHARMACIE DU PALAIS", id_nat: "" },
    { listing_name: "GRANDE PHARMACIE MOUYSSET", cip: "2042873", extractor_name: "PHARMACIE MOUYSSET", id_nat: "832002810" },
    { listing_name: "PHARMACIE MODERNE", cip: "2272503", extractor_name: "PHARMACIE MODERNE", id_nat: "" },
    { listing_name: "PHARMACIE DU CHEMIN LONG", cip: "2016728", extractor_name: "PHARMACIE DU CHEMIN LONG", id_nat: "332018811" },
    { listing_name: "PHARMACIE DE L'ECLUSE", cip: "2043919", extractor_name: "PHARMACIE DE L'ECLUSE", id_nat: "842003121" },
    { listing_name: "PHARMACIE TADDEI MEDORI", cip: "2245202", extractor_name: "PHARMACIE TADDEI MEDORI", id_nat: "202041711" },
    { listing_name: "PHARMACIE DE FRANCE", cip: "2050287", extractor_name: "PHARMACIE DE FRANCE", id_nat: "942018359" },
    { listing_name: "PHARMACIE DU 8 MAI 1945", cip: "2261533", extractor_name: "PHARMACIE DU 8 MAI 1945", id_nat: "132061276" },
    { listing_name: "PHARMACIE CARRÉ SENART", cip: "2258714", extractor_name: "PHARMACIE DU CARRE SENART", id_nat: "772012092" },
    { listing_name: "PHARMACIE LINGOSTIÈRE", cip: "2062287", extractor_name: "PHARMACIE LINGOSTIÈRE", id_nat: "062037049" },
    { listing_name: "PHARMACIE COTÉ SEINE", cip: "2260346", extractor_name: "PHARMACIE COTÉ SEINE", id_nat: "952700268" },
    { listing_name: "PHARMACIE ESPACE BOCAUD", cip: "2267069", extractor_name: "PHARMACIE ESPACE BOCAUD", id_nat: "342026218" },
    { listing_name: "GRANDE PHARMACIE DE PERSAN", cip: "2051254", extractor_name: "GRANDE PHARMACIE DE PERSAN", id_nat: "" },
    { listing_name: "PHARMACIE DU VALINCO", cip: "2273030", extractor_name: "PHARMACIE DU VALINCO", id_nat: "202021481" },
    { listing_name: "PHARMACIE DE L'ASPE", cip: "2213301", extractor_name: "PHARMACIE DE L'ASPE", id_nat: "832006787" },
    { listing_name: "PHARMACIE DE LA CITÉ", cip: "2000840", extractor_name: "PHARMACIE DE LA CITE", id_nat: "112002860" },
    { listing_name: "PHARMACIE DU GÉANT", cip: "2710493", extractor_name: "PHARMACIE DU GEANT VALS PRES LE PUY", id_nat: "432000842" },
    { listing_name: "PHARMACIE DU CENTRE DAMMARIE LES LYS", cip: "2039331", extractor_name: "PHARMACIE DU CENTRE DAMMARIE LES LYS", id_nat: "772011623" },
    { listing_name: "PHARMACIE DE SARROLA", cip: "2005235", extractor_name: "PHARMACIE DE SARROLA", id_nat: "202021648" },
    { listing_name: "PHARMACIE GRAND ANGLES", cip: "2097697", extractor_name: "PHARMACIE GRAND ANGLES", id_nat: "" },
    { listing_name: "GRANDE PHARMACIE D'OULLINS", cip: "2012965", extractor_name: "GRANDE PHARMACIE D'OULLINS", id_nat: "" },
    { listing_name: "PHARMACIE DECAROLI SAINTE MARTHE", cip: "2006662", extractor_name: "PHARMACIE DECAROLI SAINTE MARTHE", id_nat: "" },
    { listing_name: "PHARMACIE DECAROLI SAINT BARNABE", cip: "2072630", extractor_name: "PHARMACIE DECAROLI SAINT BARNABE", id_nat: "" },
    { listing_name: "PHARMACIE DE L'ALLIANCE", cip: "2102172", extractor_name: "PHARMACIE DE L'ALLIANCE", id_nat: "332022219" },
    { listing_name: "PHARMACIE DE L'ETOILE", cip: "2000514", extractor_name: "PHARMACIE DE L'ETOILE", id_nat: "332022755" },
    { listing_name: "PHARMACIE DES ATELIERS", cip: "2012631", extractor_name: "PHARMACIE DES ATELIERS", id_nat: "132081613" },
    { listing_name: "PHARMACIE SAINT JEAN", cip: "2241700", extractor_name: "PHARMACIE SAINT JEAN", id_nat: "132028473" },
    { listing_name: "GRANDE PHARMACIE DU CENTRE SUD", cip: "2183230", extractor_name: "GRANDE PHARMACIE DU CENTRE SUD", id_nat: "" },
    { listing_name: "PHARMACIE PAQUE", cip: "2265606", extractor_name: "PHARMACIE PAQUE", id_nat: "802006031" },
    { listing_name: "PHARMACIE YLIUM", cip: "2216627", extractor_name: "PHARMACIE YLIUM", id_nat: "852007137" },
    { listing_name: "PHARMACIE VAL D'EUROPE", cip: "2262411", extractor_name: "PHARMACIE VAL D'EUROPE", id_nat: "772012522" },
    { listing_name: "PHARMACIE DE CAUMONT", cip: "2013413", extractor_name: "PHARMACIE DE CAUMONT", id_nat: "842006348" },
    { listing_name: "PHARMACIE DU CADRAN", cip: "2213207", extractor_name: "PHARMACIE DU CADRAN", id_nat: "832010870" },
    { listing_name: "PHARMACIE DE PROVENCE", cip: "2255692", extractor_name: "PHARMACIE DE PROVENCE", id_nat: "832011449" },
    { listing_name: "PHARMACIE DU CENTRE (BRIGNOLES)", cip: "2043400", extractor_name: "PHARMACIE DU CENTRE (BRIGNOLES)", id_nat: "832011431" },
    { listing_name: "PHARMACIE DU CENTRE (VENTABREN)", cip: "2070696", extractor_name: "PHARMACIE DU CENTRE (VENTABREN)", id_nat: "132048687" },
    { listing_name: "PHARMACIE DU FOREZ", cip: "2021696", extractor_name: "PHARMACIE DU FOREZ", id_nat: "422027854" },
    { listing_name: "PHARMACIE CAP SUD", cip: "2043898", extractor_name: "PHARMACIE CAP SUD", id_nat: "842005472" },
    { listing_name: "PHARMACIE DE LA PLACE DE LA REPUBLIQUE", cip: "2269087", extractor_name: "PHARMACIE DE LA PLACE DE LA RÉPUBLIQUE", id_nat: "752040428" },
    { listing_name: "PHARMACIE CENTRALE", cip: "2275420", extractor_name: "PHARMACIE CENTRALE", id_nat: "132066978" },
    { listing_name: "PHARMACIE VAROISE", cip: "2249689", extractor_name: "PHARMACIE VAROISE", id_nat: "832011373" },
    { listing_name: "GRANDE PHARMACIE HYEROISE / PHARMACIE MASSILLON", cip: "2043369", extractor_name: "GRANDE PHARMACIE HYÉROISE / PHARMACIE MASSILLON", id_nat: "832011498" },
    { listing_name: "PHARMACIE ST DAMIEN", cip: "2001439", extractor_name: "PHARMACIE SAINT DAMIEN", id_nat: "062037692" },
    { listing_name: "PHARMACIE EUROPEENNE", cip: "2060866", extractor_name: "PHARMACIE EUROPEENNE", id_nat: "062050992" },
    { listing_name: "PHARMACIE DE CASTANET", cip: "2013978", extractor_name: "PHARMACIE DE CASTANET", id_nat: "302003330" },
    { listing_name: "PHARMACIE DES PORTES D'UZES", cip: "2003487", extractor_name: "PHARMACIE DES PORTES D'UZÈS", id_nat: "302007638" },
    { listing_name: "PHARMACIE DE LA MUETTE", cip: "2241386", extractor_name: "PHARMACIE DE LA MUETTE", id_nat: "952701043" },
    { listing_name: "PHARMACIE DU MILLENAIRE", cip: "2805459", extractor_name: "PHARMACIE DU MILLENAIRE", id_nat: "932017825" },
    { listing_name: "PHARMACIE DE LA CROIX D'OR", cip: "2000671", extractor_name: "PHARMACIE DE LA CROIX D OR", id_nat: "132048190" },
    { listing_name: "PHARMACIE FAUBOURG BASTILLE", cip: "2014039", extractor_name: "PHARMACIE FAUBOURG BASTILLE", id_nat: "752043471" },
    { listing_name: "PHARMACIE DES OLIVES", cip: "2002398", extractor_name: "PHARMACIE DES OLIVES", id_nat: "132043514" },
    { listing_name: "PHARMACIE DE MONTHIEU", cip: "2006688", extractor_name: "PHARMACIE DE MONTHIEU", id_nat: "422027524" },
    { listing_name: "PHARMACIE DES CASCADES", cip: "2184564", extractor_name: "PHARMACIE DES CASCADES", id_nat: "732003132" },
    { listing_name: "PHARMACIE DU GOLFE", cip: "2281235", extractor_name: "PHARMACIE DU GOLFE", id_nat: "132083346" },
    { listing_name: "PHARMACIE DU BERTEUIL", cip: "2271447", extractor_name: "PHARMACIE DU BERTEUIL", id_nat: "842005837" },
    { listing_name: "PHARMACIE DE L'EUROPE (VEAUCHE)", cip: "2000793", extractor_name: "PHARMACIE DE L'EUROPE (VEAUCHE)", id_nat: "422026542" },
    { listing_name: "GRANDE PHARMACIE DE FLEURY", cip: "2001450", extractor_name: "GRANDE PHARMACIE DE FLEURY", id_nat: "912015948" },
    { listing_name: "GRANDE PHARMACIE DE LA STATION", cip: "2006836", extractor_name: "GRANDE PHARMACIE DE LA STATION", id_nat: "922020771" },
    { listing_name: "PHARMACIE DU FOURCHENE", cip: "2145038", extractor_name: "PHARMACIE DU FOURCHENE", id_nat: "562008771" },
    { listing_name: "PHARMACIE SEPT CHEMINS", cip: "2176574", extractor_name: "PHARMACIE DES 7 CHEMINS", id_nat: "692039092" },
    { listing_name: "PHARMACIE DU GEANT LUCE", cip: "2092039", extractor_name: "PHARMACIE DU GÉANT LUCE V2", id_nat: "282004084" },
    { listing_name: "PHARMACIE DU CENTRALE EVRY 2", cip: "2046773", extractor_name: "PHARMACIE CENTRALE EVRY 2", id_nat: "912015492" },
    { listing_name: "PHARMACIE DU LEMAN", cip: "2002958", extractor_name: "PHARMACIE DU LEMAN", id_nat: "742005481" },
    { listing_name: "PHARMACIE DE TOKORO", cip: "2012756", extractor_name: "PHARMACIE DE TOKORO", id_nat: "052702370" },
    { listing_name: "PHARMACIE DE BEAULIEU", cip: "2125556", extractor_name: "PHARMACIE DE BEAULIEU", id_nat: "442002119" },
    { listing_name: "PHARMACIE BANDEL", cip: "2002439", extractor_name: "PHARMACIE BANDEL", id_nat: "692020472" },
    { listing_name: "PHARMACIE DE LA TOISON D'OR", cip: "2245600", extractor_name: "PHARMACIE DE LA TOISON D OR", id_nat: "212004386" },
    { listing_name: "PHARMACIE EGLETONS", cip: "2007327", extractor_name: "PHARMACIE EGLETONS", id_nat: "192005940" },
    { listing_name: "PHARMACIE DU BOCAGE", cip: "2207413", extractor_name: "PHARMACIE DU BOCAGE", id_nat: "792020646" },
    { listing_name: "PHARMACIE DE L'AEROPORT", cip: "3003717", extractor_name: "PHARMACIE DE L AEROPORT", id_nat: "972103352" },
    { listing_name: "PHARMACIE CENTRALE VAL D'OLY", cip: "2224596", extractor_name: "PHARMACIE CENTRALE VAL D'OLY", id_nat: "" },
    { listing_name: "PHARMACIE BASTIDE ROUGE", cip: "2277889", extractor_name: "PHARMACIE DE LA BASTIDE ROUGE", id_nat: "062029590" },
    { listing_name: "PHARMACIE DE L'EUROPE (MAURS)", cip: "2285140", extractor_name: "PHARMACIE DE L'EUROPE (MAURS)", id_nat: "152001665" },
    { listing_name: "PHARMACIE PREISS", cip: "2004946", extractor_name: "PHARMACIE PREISS", id_nat: "302004957" },
    { listing_name: "PHARMACIE DU WAHOO", cip: "2170457", extractor_name: "PHARMACIE DU WAHOO", id_nat: "662004100" },
    { listing_name: "PHARMACIE DU PRADIAN", cip: "2037046", extractor_name: "PHARMACIE DU PRADIAN", id_nat: "732002811" },
    { listing_name: "PHARMACIE DE LA ROCADE", cip: "2245029", extractor_name: "PHARMACIE DE LA ROCADE", id_nat: "202041943" },
    { listing_name: "PHARMACIE DU CHÂTEAU", cip: "2032289", extractor_name: "PHARMACIE DU CHÂTEAU", id_nat: "662004522" },
    { listing_name: "PHARMACIE FONTVIEILLE", cip: "2781606", extractor_name: "PHARMACIE DE FONTVIEILLE", id_nat: "132021585" },
    { listing_name: "PHARMACIE DES SALICORNES", cip: "2284220", extractor_name: "PHARMACIE DES SALICORNES", id_nat: "302006192" },
    { listing_name: "PHARMACIE DE PEYROLLES", cip: "2005282", extractor_name: "PHARMACIE DE PEYROLLES", id_nat: "132042649" },
    { listing_name: "PHARMACIE D ATLANTIS", cip: "2022485", extractor_name: "PHARMACIE ATLANTIS", id_nat: "442005393" },
    { listing_name: "PHARMACIE DES PINS", cip: "2269506", extractor_name: "PHARMACIE DES PINS", id_nat: "442004586" },
    { listing_name: "PHARMACIE DES 4 CHEMINS", cip: "2255540", extractor_name: "PHARMACIE DES QUATRES CHEMINS", id_nat: "922021373" },
    { listing_name: "PHARMACIE HOMEOPATHIQUE DE L'EUROPE", cip: "2052174", extractor_name: "PHARMACIE HOMEOPATHIQUE DE L'EUROPE", id_nat: "" },
    { listing_name: "PHARMACIE PUIG LEVEILLE", cip: "2007123", extractor_name: "PHARMACIE PUIG LÉVEILLÉ", id_nat: "712006733" },
    { listing_name: "GRANDE PHARMACIE DES ARCADES", cip: "2098753", extractor_name: "GRANDE PHARMACIE DES ARCADES", id_nat: "312008915" },
    { listing_name: "PHARMACIE DE LA GARE", cip: "2040698", extractor_name: "PHARMACIE DE LA GARE", id_nat: "782712756" },
    { listing_name: "PHARMACIE JALLES", cip: "2176071", extractor_name: "PHARMACIE JALLES", id_nat: "692013469" },
    { listing_name: "PHARMACIE DE CAPESTANG", cip: "2018065", extractor_name: "PHARMACIE DE CAPESTANG", id_nat: "342027588" },
    { listing_name: "PHARMACIE DES 2 FONTAINES", cip: "2026338", extractor_name: "PHARMACIE DES DEUX FONTAINES", id_nat: "572013522" },
    { listing_name: "GRANDE PHARMACIE DES OCRES", cip: "2252534", extractor_name: "GRANDE PHARMACIE DES OCRES", id_nat: "842006462" },
    { listing_name: "PHARMACIE MONTARNAUD", cip: "2288602", extractor_name: "PHARMACIE MONTARNAUD", id_nat: "342030137" },
    { listing_name: "PHARMACIE VILLABE", cip: "2225322", extractor_name: "PHARMACIE VILLABE A6", id_nat: "912011640" },
    { listing_name: "PHARMACIE ANDREWSKI ODDON", cip: "2186645", extractor_name: "PHARMACIE ANDREWSKI ODDON", id_nat: "742006752" },
    { listing_name: "ACTION PHARMA", cip: "2250495", extractor_name: "ACTION PHARMA", id_nat: "912016110" },
    { listing_name: "GRANDE PHARMACIE CLERMONTOISE", cip: "2165562", extractor_name: "GRANDE PHARMACIE CLERMONTOISE", id_nat: "632013454" },
    { listing_name: "GRANDE PHARMACIE DE BLAGNAC", cip: "2275588", extractor_name: "GRANDE PHARMACIE DE BLAGNAC", id_nat: "" },
    { listing_name: "PHARMACIE DU STADE VÉLODROME", cip: "2072049", extractor_name: "PHARMACIE DU STADE VÉLODROME", id_nat: "132046384" },
    { listing_name: "PHARMACIE POLYGONE RIVIERA", cip: "2012778", extractor_name: "PHARMACIE POLYGONE RIVIERA", id_nat: "062029871" },
    { listing_name: "PHARMACIE SIRVIN", cip: "2000910", extractor_name: "PHARMACIE SIRVIN", id_nat: "372006049" },
    { listing_name: "PHARMACIE DES JARDINS", cip: "2250055", extractor_name: "PHARMACIE DES JARDINS", id_nat: "842006306" },
    { listing_name: "PHARMACIE DU CENTRE (SAINT GELY DU FESC)", cip: "2108263", extractor_name: "PHARMACIE DU CENTRE (SAINT GELY DU FESC)", id_nat: "342030285" },
    { listing_name: "PHARMACIE DU PLAN", cip: "2043573", extractor_name: "PHARMACIE DU PLAN", id_nat: "" },
    { listing_name: "PHARMACIE DE LA MONTAGNETTE", cip: "2006217", extractor_name: "PHARMACIE DE LA MONTAGNETTE", id_nat: "132069444" },
    { listing_name: "PHARMACIE DU METRO", cip: "2225474", extractor_name: "PHARMACIE DU METRO", id_nat: "922017215" },
    { listing_name: "PHARMACIE PORTE D'ESPAGNE", cip: "2170546", extractor_name: "PHARMACIE PORTE D'ESPAGNE", id_nat: "" },
    { listing_name: "PHARMACIE MONTPARNASSE BIENVENUE", cip: "2191660", extractor_name: "PHARMACIE MONTPARNASSE BIENVENUE", id_nat: "" },
    { listing_name: "PHARMACIE PRINCIPALE JOINVILLE", cip: "2005630", extractor_name: "PHARMACIE PRINCIPALE JOINVILLE", id_nat: "" },
    { listing_name: "GRANDE PHARMACIE TERRE DE SEINE", cip: "2091234", extractor_name: "GRANDE PHARMACIE TERRE DE SEINE", id_nat: "" },
    { listing_name: "PHARMACIE DU CARRE D'OR", cip: "2275483", extractor_name: "PHARMACIE DU CARRE D'OR", id_nat: "" },
    { listing_name: "PHARMACIE GALLIERA", cip: "2193118", extractor_name: "PHARMACIE GALLIERA", id_nat: "" },
    { listing_name: "PHARMACIE EIFFEL COMMERCE", cip: "2003735", extractor_name: "PHARMACIE EIFFEL COMMERCE", id_nat: "" },
    { listing_name: "PHARMACIE DES 4 SAISONS", cip: "2168720", extractor_name: "PHARMACIE DES 4 SAISONS", id_nat: "642024772" },
    { listing_name: "PHARMACIE DE NANTERRE UNIVERSITÉ", cip: "2002865", extractor_name: "PHARMACIE NANTERRE UNIVERSITE", id_nat: "" },
    { listing_name: "PHARMACIE ORLY SUD", cip: "2039638", extractor_name: "PHARMACIE ORLY SUD", id_nat: "" },
    { listing_name: "SELAS PHARMACIE AEROGARE 2D", cip: "2241150", extractor_name: "SELAS PHARMACIE AEROGARE 2D", id_nat: "" },
];

/**
 * Tente de récupérer le CIP d'une pharmacie à partir de son nom ou de son IDNAT
 */
export function getPharmacyCip(name: string, idNat: string | null): string | undefined {
    // Nettoyer les entrées pour la recherche
    const cleanName = name ? name.toLowerCase().trim() : '';
    const cleanIdNat = idNat ? idNat.trim() : '';

    // Stratégie 1: Recherche par IDNAT si disponible
    if (cleanIdNat) {
        const foundByIdNat = PHARMACY_CIP_MAPPING.find(p => p.id_nat === cleanIdNat);
        if (foundByIdNat && foundByIdNat.cip) {
            return foundByIdNat.cip;
        }
    }

    // Stratégie 2: Recherche par nom (extractor_name ou listing_name)
    if (cleanName) {
        // Essayer de trouver une correspondance exacte (insensible à la casse)
        const foundByName = PHARMACY_CIP_MAPPING.find(p =>
            p.extractor_name.toLowerCase().trim() === cleanName ||
            p.listing_name.toLowerCase().trim() === cleanName
        );

        if (foundByName && foundByName.cip) {
            return foundByName.cip;
        }

        // Essayer une recherche plus floue si nécessaire (contient)
        // Note: Cela pourrait être risqué, donc on commence par une correspondance exacte.
        // Si les noms dans la base de données ne sont pas exactement les mêmes que ceux de l'extracteur,
        // nous devrons peut-être ajuster cette logique.
    }

    return undefined;
}
